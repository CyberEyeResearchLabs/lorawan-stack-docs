<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.70.0" />
  <title>Troubleshooting CLI | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/reference/cli/troubleshooting/" />
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.294c77c74f918a8f5064a76731a816bd0b67f9a72689b5b3e1426b114bf7b43a.css" integrity="sha256-KUx3x0&#43;Rio9QZKdnMagWvQtn&#43;acmibWz4UJrEUv3tDo=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Troubleshooting CLI">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Troubleshooting CLI">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/reference/cli/troubleshooting/">
  <meta name="twitter:title" content="Troubleshooting CLI" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>


<body><nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
        <p class="navbar-item is-size-7">v3.14</p>
      </a><div class="navbar-item navbar-search-brand">
        <div class="field has-addons has-addons-centered">
          <div class="control">
            <input id="search-input-brand" class="input search-bar" type="text" placeholder="Search the docs..." type="text">
          </div>
        </div>
      </div>
      
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/devices/">Devices</a>
        <a class="navbar-item" href="/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/reference/">Reference</a><div class="navbar-item navbar-search-menu">
            <div class="field has-addons has-addons-centered">
              <div class="control">
                <input id="search-input-menu" class="input search-bar" type="text" placeholder="Search the docs..." type="text">
              </div>
            </div>
          </div></div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="/docs/download/">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript">
    docsearch({
      apiKey: "",
      indexName: "thethingsstack",
      inputSelector: '#search-input-brand',
      debug: false 
    });
    docsearch({
      apiKey: "",
      indexName: "thethingsstack",
      inputSelector: '#search-input-menu',
      debug: false 
    });
  </script><div class="container" role="document">
  <div class="columns my-0 ">
      
      <div class="column is-3 is-2-desktop sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">Reference</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/reference/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/adr/" class="">Adaptive Data Rate</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/api/" class="">API</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/application-packages/" class="">Application Packages</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/stripe/" class="">Billing with Stripe</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/cli/" class="">Command-Line Interface</a>
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/cli/applications/" class="">Application CLI Commands</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/cli/applications_packages/" class="">Application Packages CLI Commands</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/cli/applications_pub_sub/" class="">Application Pub/Sub CLI Commands</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/cli/storage_integration/" class="">Application Storage Integration CLI Commands</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/cli/applications_webhooks/" class="">Application Webhook CLI Commands</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/cli/end_devices/" class="">End Device CLI Commands</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/cli/gateways/" class="">Gateway CLI Commands</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/cli/clients/" class="">OAuth Client CLI Commands</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/cli/organizations/" class="">Organization CLI Commands</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/cli/troubleshooting/" class="is-active">Troubleshooting CLI</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/reference/cli/users/" class="">User CLI Commands</a>
    
  </li>

</ul>


    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/components/" class="">Components</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/configuration/" class="">Configuration</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/data-formats/" class="">Data Formats</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/data-retention/" class="">Data Retention and Privacy</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/email-templates/" class="">Email Templates</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/federated-auth/" class="">Federated Authentication</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/frequency-plans/" class="">Frequency Plans</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/glossary/" class="">Glossary</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/id-eui-constraints/" class="">ID and EUI Constraints</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/interop-repository/" class="">Interoperability Repository</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/lbs-implementation-guide/implementation-details/" class="">LoRa Basics Station Implementation Guide</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/spec-regional-parameters/" class="">LoRaWAN Specification and Regional Parameters</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/networking/" class="">Networking</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/purge/" class="">Purging Entities</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/rate-limiting/" class="">Rate Limiting</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/root-certificates/" class="">Root Certificates</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/telemetry/" class="">Telemetry</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/reference/branding/" class="">Web UI Branding</a>
  </li>
</ul>



</nav>








      </div>
      
      <div class="column is-9 is-8-desktop sidebar-middle">
        <div class="docs-content">
        <h1 class="title is-size-2">Troubleshooting CLI
          
        </h1>
        
        <div class="content">
          <p>This section contains help for common errors encountered when using the CLI.</p>
<h2 id="faulty-oauth-server-address">Faulty OAuth Server Address</h2>
<p>In the <a href="https://www.thethingsindustries.com/docs/getting-started/cli/installing-cli/#configuration">CLI configuration file</a>, the server address is set to <code>thethings.example.com</code> by default. If you do not change this server address to the address of your own deployment, using <code>ttn-lw-cli login</code> command will redirect to <code>https://thethings.example.com/oauth/authorize?client_id=cli&amp;redirect_uri=local-callback&amp;response_type=code</code> in your web browser, where the CLI needs to be authorized for exchanging an access token.</p>
<p>Since your server address is most likely different than <code>thethings.example.com</code>, you will see an error about that URL not being found in your browser, the access token will not be obtained and you will not be able to execute any further CLI commands. In your terminal, you will see something like:</p>
<pre><code>INFO Opening your browser on https://thethings.example.com/oauth/authorize?client_id=cli&amp;redirect_uri=local-callback&amp;response_type=code
INFO After logging in and authorizing the CLI, we'll get an access token for future commands.
INFO Waiting for your authorization...
</code></pre><p>The solution to this issue would be to replace <code>thethings.example.com</code> occurrences with the server address of your The Things Stack deployment.</p>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  You will experience the same behavior if you are using an <code>https</code> port other than <code>443</code> and you have not specified that port in the <code>oauth-server-address</code> parameter in the CLI configuration file (or with <code>--oauth-server-address</code> flag when running the CLI). For example, if you are running The Things Stack on <code>localhost</code>, you would have to specify the OAuth server address as <code>'https://localhost:8885/oauth'</code>.
</div>

<h2 id="certificate-signed-by-unknown-authority">Certificate Signed by Unknown Authority</h2>
<p>If the CA file path is not specified in the <a href="https://www.thethingsindustries.com/docs/getting-started/cli/installing-cli/#configuration">CLI configuration file</a> (or with <code>--ca</code> flag when running the CLI), or if you are using self-signed certificates, using <code>ttn-lw-cli login</code> might result in the following error:</p>
<pre><code>ERROR Could not exchange OAuth access token    error=Post &quot;https://thethings.example.com:8885/oauth/token&quot;: x509: certificate signed by unknown authority
</code></pre><p>If the CA file is present on your system, the CLI configuration file should contain <code>ca: /path/to/ca.pem</code> or you should run the CLI with <code>--ca=&quot;/path/to/ca.pem&quot;</code> flag, and you should also import the CA file using your web browser&rsquo;s certificate manager to make sure it&rsquo;s trusted by your system.</p>
<p>You can also run the CLI with the <code>--fetch-ca</code> flag which will make sure to connect to the server, fetch the CA file and configure the path to it in your CLI configuration file.</p>
<h2 id="no-collaborator-set">No Collaborator Set</h2>
<p>Many CLI commands require that a user or organization is set to grant permissions over an entity. For example, to create an application:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli applications create app1 --user-id user1
</code></pre></div><h2 id="permission-denied">Permission Denied</h2>
<p>If a user (specified with the <code>--user-id</code> flag) does not have sufficient rights to perform the desired action, you will face an error such as:</p>
<pre><code>error:pkg/auth/rights:insufficient_application_rights (insufficient rights for application `app1`)
</code></pre><p>See <a href="https://www.thethingsindustries.com/docs/getting-started/user-management/">Users and Organizations</a> section for more info on rights management.</p>
<h2 id="invalid-identifiers">Invalid Identifiers</h2>
<p>When creating an entity using the CLI, if the ID value that you use does not follow The Things Stack naming convention, you will face an error. For example, using <code>ttn-lw-cli gateways create My_Gateway</code> command would result in the following error:</p>
<pre><code>error:pkg/errors:validation (invalid `gateway_id`: value does not match regex pattern &quot;^[a-z0-9](?:[-]?[a-z0-9]){2,}$&quot;)
field=gateway_id
name=GatewayIdentifiersValidationError
reason=value does not match regex pattern &quot;^[a-z0-9](?:[-]?[a-z0-9]){2,}$&quot;
</code></pre><p>See <a href="https://www.thethingsindustries.com/docs/reference/id-eui-constraints/">ID and EUI Constraints</a> section for more info.</p>
        </div>
        <div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/reference/cli/organizations/">← Organization CLI Commands</a>
<a class="button is-pulled-right" href="/docs/reference/cli/users/">User CLI Commands →</a>
</div>

        <script>window.emojicom_widget = { campaign: "" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
        </div>
      </div>
      
      <div class="column is-hidden-touch is-2-desktop sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#faulty-oauth-server-address'>Faulty OAuth Server Address</a></li>
    
      
      <li><a href='#certificate-signed-by-unknown-authority'>Certificate Signed by Unknown Authority</a></li>
    
      
      <li><a href='#no-collaborator-set'>No Collaborator Set</a></li>
    
      
      <li><a href='#permission-denied'>Permission Denied</a></li>
    
      
      <li><a href='#invalid-identifiers'>Invalid Identifiers</a></li>
    
  </ul>


  </nav>

      </div>
      
  </div>
</div>



<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/devices/">Devices</a></p>
        <p><a class="" href="/docs/gateways/">Gateways</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/network-and-routing/v3">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="is-size-7">
  Last changed by Nejra Selimović on 09 Aug 2021.
  <br>
  <a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/commit/0bd2169567a050c55f9cce0690dd28c1b9930f7f">
      doc: Add CLI troubleshooting (#487)
    </a>
</p>

<a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/blob/master/doc/content/reference/cli/troubleshooting.md" class="button">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.79500656c3860a54b3b38e5f5770a5130bc57306ebb67ca9b057e494f6f4b454.js" integrity="sha256-eVAGVsOGClSzs45fV3ClEwvFcwbrtnypsFfklPb0tFQ=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
