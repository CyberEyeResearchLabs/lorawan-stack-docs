<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.70.0" />
  <title>Migrate using the Console | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/getting-started/migrating/migrating-from-v2/migrate-using-console/" />
  <link rel="alternate icon" href="/docs/favicon.ico">
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.07bd6845af106c056072b394b0aba314a5ea0d3b3ad4fba538a2fa137f338b3b.css" integrity="sha256-B71oRa8QbAVgcrOUsKujFKXqDTs61PulOKL6E38zizs=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Migrate using the Console">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Migrate using the Console">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/getting-started/migrating/migrating-from-v2/migrate-using-console/">
  <meta name="twitter:title" content="Migrate using the Console" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>
<body><nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div id="migration-info">
      <div id="migration-text">thethingsstack.io has moved to thethingsindustries.com/docs</div>
      <div id="migration-button" class="button is-primary">Got it</div>
  </div>
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
        <p class="navbar-item is-size-7">v3.12</p>
      </a>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/devices/">Devices</a>
        <a class="navbar-item" href="/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/reference/">Reference</a>
      </div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="/docs/download/">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav>
<section class="search-container">
    <div class="container">
      <div class="columns is-vcentered">
        <div class="column">
          <div class="field has-addons has-addons-centered">
            <div class="control">
              <input class="input search-bar" id="search-input" type="text" placeholder="Search" type="text">
            </div>
          </div>
        </div>
      </div>
    </div>
</section>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: "",
indexName: "thethingsstack",
inputSelector: '#search-input',
debug: false 
});
</script>
<div class="container" role="document">
  <div class="columns my-0">
      <div class="column is-one-fifth-tablet is-one-third sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">Getting Started</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/getting-started/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/quick-start/" class="">Quick Start</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/what-is-tts/" class="">What Is The Things Stack?</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/cli/" class="">Command-line Interface</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/console/" class="">Console</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/installation/" class="">Installing The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/" class="">Migrating to The Things Stack</a>
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/major-changes/" class="">Major Changes In The Things Stack</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/migrating-from-v2/" class="">Migrating End Devices from V2</a>
    
    


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/migrating-from-v2/packet-broker-requirements/" class="">Packet Broker Requirements for End Device Migration</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/migrating-from-v2/migrate-using-console/" class="is-active">Migrate using the Console</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/migrating-from-v2/migrate-using-migration-tool/" class="">Migrate using the Migration Tool</a>
    
  </li>

</ul>


    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/migrate-from-chirpstack/" class="">Migrating End Devices from ChirpStack</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/import-devices/" class="">Import End Devices in The Things Stack</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/migration-tool/" class="">Migration Tool</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/configure-mac-settings/" class="">Fine-tuning MAC Settings for End Devices</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/gateway-migration/" class="">Migrating Gateways</a>
    
  </li>

  <li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/device-json/" class="">JSON File Reference</a>
    
  </li>

</ul>


    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/ttn/" class="">The Things Network</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/aws/" class="">The Things Stack AWS Launcher</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/cloud-hosted/" class="">The Things Stack Cloud</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/troubleshooting/" class="">Troubleshooting Getting Started</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/upgrading/" class="">Upgrading The Things Stack</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/user-management/" class="">Users and Organizations</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/api/" class="">Using the API</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/getting-started/events/" class="">Working with Events</a>
  </li>
</ul>



</nav>








      </div>
      <div class="column sidebar-middle">

<div class="docs-content">
<h1 class="title is-size-2">Migrate using the Console
  
  
  
  
</h1>

<div class="content">
  <p>This section refers to migrating end devices to The Things Stack by using <a href="https://www.thethingsindustries.com/docs/getting-started/console/">The Things Stack Console</a>.</p>
<p>Migrating your end devices using The Things Stack Console is easy, but it is convenient only if you have an intention of migrating few devices.</p>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  <p>This method comes down to adding end devices in The Things Stack Console one by one, and it is not possible to migrate groups of devices as with using <code>ttn-lw-migrate</code> tool.</p>
<p>With this method, it is also not possible to migrate active device sessions. Therefore, this section implies migrating devices without active sessions.</p>

</div>

<p>Follow the steps below to migrate your end device from V2 to The Things Stack by using the Console.</p>
<h2 id="add-an-end-device-in-the-things-stack">Add an End Device in The Things Stack</h2>
<p>The first step is to add your end device in The Things Stack.</p>
<blockquote>
<p>See <a href="https://www.thethingsindustries.com/docs/devices/adding-devices/">Adding Devices</a> section for more details on adding devices in The Things Stack.</p>
</blockquote>
<p>In general, there are two ways to add devices in The Things Stack Console - <strong>Manually</strong> and via the <strong>LoRaWAN Device Repository</strong>. Configuring settings for end devices depends on their type - OTAA or ABP.</p>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  We strongly recommend using OTAA over ABP. Read <a href="https://www.thethingsindustries.com/docs/devices/abp-vs-otaa/">why using OTAA is better than ABP</a>.
</div>

<div class="tabs is-boxed">
  <ul>
    
    <li data-tab="otaa">
      <a>
        <span>OTAA</span>
      </a>
    </li>
    
    <li data-tab="abp">
      <a>
        <span>ABP</span>
      </a>
    </li>
    
  </ul>
</div>
<div class="tab-content content">
  <section data-content="otaa">
  <p>If you want to add an OTAA end device manually, follow these steps:</p>
<ul>
<li>Select <strong>Over the air actiovation (OTAA)</strong></li>
<li>Choose <strong>LoRaWAN version</strong> <code>MAC V1.0.2</code> (this is the version used in V2)</li>
<li>Create an <strong>End device ID</strong> (does not have to match the <strong>Device ID</strong> in V2)</li>
<li>Enter your end device’s <strong>AppEUI</strong> and <strong>DevEUI</strong> (these have to be the same as the ones in V2, as this info is provided by the device manufacturer)</li>
<li>Select your <strong>Frequency plan</strong></li>
<li>Select <strong>Regional Parameters version</strong> <code>PHY V1.0.2 REV B</code> (this is the version used in V2)</li>
<li>Do not check the boxes <strong>Supports class B/C</strong></li>
<li>Keep the default Advanced settings as OTAA devices commonly negotiate about these with The Things Stack Network Server</li>
<li>Enter your end device’s <strong>AppKey</strong> (has to match the one in V2, as this info is provided by the device manufacturer)</li>
</ul>
</section>
<section data-content="abp">
  <p>If you still have a good reason to use ABP device, you can add it in The Things Stack by following next few steps:</p>
<ul>
<li>Select <strong>Activation by personalization (ABP)</strong>
Choose <strong>LoRaWAN version</strong> <code>MAC V1.0.2</code> (this is the version used in V2)</li>
<li>Create an <strong>End device ID</strong> (does not have to match the <strong>Device ID</strong> in V2)</li>
<li>The <strong>DevEUI</strong> field is optional</li>
<li>Select your <strong>Frequency plan</strong></li>
<li>Select <strong>Regional Parameters version</strong> <code>PHY V1.0.2 REV B</code> (this is the version used in V2)</li>
<li>Do not check the boxes <strong>Supports class B/C</strong></li>
<li>Enter your device’s <strong>DevAddr</strong> and <strong>NwkSKey</strong> (see the note below)</li>
<li>Advanced settings must be set on registration (beware that changing these settings might not work later)
<ul>
<li>Set <strong>Frame counter width</strong> to <code>32 bit</code> (this is the value used in V2)</li>
<li>Set <strong>RX1 Delay</strong> to <code>1</code> (see the note below)</li>
<li>Set <strong>RX1 Data Rate Offset</strong> to <code>0</code></li>
<li>Your device probably resets frame counters, so check the <strong>Resets Frame Counters</strong> box</li>
<li>Set <strong>RX2 Data Rate Index</strong> to <code>3</code> if your frequency plan is EU868</li>
<li>Set <strong>RX2 Frequency</strong> to <code>869525000</code> if your frequency plan is EU868</li>
<li>Set <strong>Factory Preset Frequencies</strong> for EU868 devices to <code>868100000, 868300000, 868500000</code> for all devices, or to <code>867100000, 867300000, 867500000, 867700000, 867900000, 868100000, 868300000, 868500000</code> for 8-channel devices</li>
</ul>
</li>
</ul>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  <p>The <strong>DevAddr</strong> and <strong>RX1 Delay</strong> values depend on your specific use case.</p>
<p>If you want your end device traffic to be routed via Packet Broker to The Things Stack, the <strong>DevAddr</strong> must be routable by the Packet Broker and the <strong>RX1 Delay</strong> value must be 5 seconds. Note that the <strong>DevAddr</strong> is routable only if you are using <strong>The Things Industries V2</strong> and migrating to <strong>The Things Stack Cloud</strong>, and even that is being achieved only on customer request by contacting <a href="mailto:support@thethingsindustries.com">The Things Industries support</a>.</p>
<p>If the existing <strong>DevAddr</strong> is not routable by the Packet Broker (i.e. you are not migrating from <strong>The Things Industries V2</strong> to <strong>The Things Stack Cloud</strong>), and/or <strong>RX1 Delay</strong> is different than 5 seconds (for V2 the default is 1 second), you will need to auto-generate new <strong>DevAddr</strong> during device registration on The Things Stack, then re-program the device to assign it with that new <strong>DevAddr</strong> and <strong>RX1 Delay</strong> of 5 seconds. Otherwise, the traffic from your device will not be properly routed by the Packet Broker or will never reach your end device in time.</p>
<p>If you do not want your traffic to be routed by the Packet Broker, i.e. you want to migrate your gateway to The Things Stack too, you do not have to re-program your device. You can keep the existing <strong>DevAddr</strong> and <strong>RX1 Delay</strong> of 1 second, and use these values when adding the device to The Things Stack. Be aware that if you are using a high-latency backhaul, keeping the <strong>RX1 Delay</strong> of 1 second might cause latency issues.</p>
</div>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  Note that re-programming the ABP device to change <strong>DevAddr</strong> to the one issued by The Things Stack and <strong>RX1 Delay</strong> to 5 seconds is <strong>recommended</strong>. Re-programming the ABP device to do this might also be a good time to reconsider switching it to OTAA by flashing the firmware and adopting some <a href="https://www.thethingsindustries.com/docs/devices/best-practices/">best practices</a>. <a href="https://www.thethingsindustries.com/docs/devices/abp-vs-otaa/">Check why using OTAA is recommended</a>.
</div>
</section>

</div>

<p>If your end device is a part of the <a href="https://www.thethingsindustries.com/docs/integrations/payload-formatters/device-repo/">LoRaWAN Device Repository</a>, you will need to select its <strong>Brand</strong>, <strong>Model</strong> and provide other device-specific information.</p>
<h2 id="prevent-the-end-device-from-joining-v2-network">Prevent the End Device from Joining V2 Network</h2>
<p>When your end device is registered in The Things Stack, it is necessary to prevent it from re-joining V2 network.</p>
<div class="tabs is-boxed">
  <ul>
    
    <li data-tab="otaa">
      <a>
        <span>OTAA</span>
      </a>
    </li>
    
    <li data-tab="abp">
      <a>
        <span>ABP</span>
      </a>
    </li>
    
  </ul>
</div>
<div class="tab-content content">
  <section data-content="otaa">
  <p>To prevent OTAA device from re-joining V2 network, the recommended practice is to change the <strong>AppKey</strong> in V2. By changing the <strong>AppKey</strong>, the existing session on V2 will not be terminated yet, but the end device will not be able to re-join because V2 cluster will reject its new Join Requests.</p>
<h2 id="let-the-otaa-end-device-join-the-things-stack-network">Let the OTAA End Device Join The Things Stack Network</h2>
<p>Next, your end device needs to join The Things Stack network.</p>
<p>Some OTAA devices ocasionally perform new joins - with these end devices, you can only wait for them to do this on their own. Depending on the end device, you can also:</p>
<ul>
<li>Send a downlink message from V2 Console to trigger a new join</li>
<li>Delete the end device from V2 Console so it loses the connection to V2 and triggers a re-join</li>
<li>Power cycle the end device</li>
</ul>
</section>
<section data-content="abp">
  <div class="notification is-warning is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Warning:</h5>
  For ABP device, you need to completely delete it from V2, especially if you have not re-programmed it for a new <strong>DevAddr</strong>. Having the device registered in both V2 and The Things Stack would  introduce some serious conflicts.
</div>
</section>

</div>

<h2 id="next-step---migrate-gateways">Next Step - Migrate Gateways</h2>
<div class="tabs is-boxed">
  <ul>
    
    <li data-tab="otaa">
      <a>
        <span>OTAA</span>
      </a>
    </li>
    
    <li data-tab="abp">
      <a>
        <span>ABP</span>
      </a>
    </li>
    
  </ul>
</div>
<div class="tab-content content">
  <section data-content="otaa">
  <p>Since we assume you have not migrated your gateway from V2 yet, new Join Requests sent by your OTAA device are still being received by the V2 network. However, if you have prevented your device from joining V2 network (as recommended above), these Join Requests are not going to be accepted by the V2 Network Server.</p>
<p>Instead, these Join Requests are going to be routed to The Things Stack via Packet Broker and The Things Stack will accept them. Your OTAA device will negotiate with The Things Stack Network Server to obtain a new <strong>DevAddr</strong>, channel settings and other MAC parameters. The traffic from your end device can from now on be routed to The Things Stack thanks to the newly assigned <strong>DevAddr</strong> and <strong>RX1 Delay</strong> of 5 seconds, which fulfills the Packet Broker requirements.</p>
</section>
<section data-content="abp">
  <p>ABP device does not perform the join procedure, so it does not get assigned with a new <strong>DevAddr</strong>, <strong>RX1 Delay</strong> and some other parameters like OTAA does (unless you re-program it). Instead, these values are hardcoded in the device itself.</p>
<p>If you are not specifically migrating from <strong>The Things Industries V2</strong> to <strong>The Things Stack Cloud</strong>, your ABP device&rsquo;s <strong>DevAddr</strong> will not be routable by the Packet Broker. If the <strong>RX1 Delay</strong> of your device is not equal to 5 seconds, the device traffic will probably never reach The Things Stack.</p>
<p>If you want your traffic to be routed via Packet Broker, you will need to re-program your ABP device to use <strong>DevAddr</strong> issued by The Things Stack and <strong>RX1 Delay</strong> of 1 second.</p>
<p>If you want to keep <strong>DevAddr</strong> and <strong>RX1 Delay</strong> as they were in V2, you will need to <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/gateway-migration/">migrate your gateway to The Things Stack</a>.</p>
</section>

</div>

<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  Even if you manage to get your end device traffic routed to The Things Stack via Packet Broker, we recommend you get in touch with your local The Things Network community and agree on coordinating the migration of gateways, so you do not loose the LoRaWAN network coverage. See how to <a href="https://www.thethingsindustries.com/docs/getting-started/migrating/gateway-migration/">migrate your gateway to The Things Stack</a>.
</div>
</div>
<div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/getting-started/migrating/migrating-from-v2/packet-broker-requirements/">← Packet Broker Requirements for End Device Migration</a>
<a class="button is-pulled-right" href="/docs/getting-started/migrating/migrating-from-v2/migrate-using-migration-tool/">Migrate using the Migration Tool →</a>
</div>

<script>window.emojicom_widget = { campaign: "" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
</div>


      </div>
      <div class="column is-hidden-touch is-one-quarter is-one-fifth-widescreen sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#add-an-end-device-in-the-things-stack'>Add an End Device in The Things Stack</a></li>
    
      
      <li><a href='#prevent-the-end-device-from-joining-v2-network'>Prevent the End Device from Joining V2 Network</a></li>
    
      
      <li><a href='#let-the-otaa-end-device-join-the-things-stack-network'>Let the OTAA End Device Join The Things Stack Network</a></li>
    
      
      <li><a href='#next-step---migrate-gateways'>Next Step - Migrate Gateways</a></li>
    
  </ul>


  </nav>

      </div>
  </div>
</div>


<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/devices/">Devices</a></p>
        <p><a class="" href="/docs/gateways/">Gateways</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/network-and-routing/v3">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="is-size-7">
  Last changed by Nejra on 05 May 2021.
  <br>
  <a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/commit/fb7323953601e8b119025450db03a29517d2e62e">
      doc: Fix migration docs
    </a>
</p>

<a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/blob/master/doc/content/getting-started/migrating/migrating-from-v2/migrate-using-console.md" class="button">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.0591382a7eda937afd29a067f0682efe7f966ea310ee0e055021aa6365233405.js" integrity="sha256-BZE4Kn7ak3r9KaBn8Ggu/n&#43;WbqMQ7g4FUCGqY2UjNAU=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
