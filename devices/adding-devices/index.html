<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.70.0" />
  <title>Adding Devices | The Things Stack for LoRaWAN</title><link rel="canonical" href="https://www.thethingsindustries.com/docs/devices/adding-devices/" />
  <link rel="alternate icon" href="/docs/favicon.ico">
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/svg+xml" href="/docs/favicon.svg">
  <link rel="stylesheet" href="https://www.thethingsindustries.com/docs/css/theme.min.448201dae984e04b2579a9ee482b5768bcd23d222184681e69f3a8b1146f3bb2.css" integrity="sha256-RIIB2umE4EsleanuSCtXaLzSPSIhhGgeafOosRRvO7I=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Adding Devices">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Adding Devices">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.thethingsindustries.com/docs/devices/adding-devices/">
  <meta name="twitter:title" content="Adding Devices" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>
<body><nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container is-fluid">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/TTS-logo.svg">
        <p class="navbar-item is-size-7">v3.13</p>
      </a>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/devices/">Devices</a>
        <a class="navbar-item" href="/docs/gateways/">Gateways</a>
        <a class="navbar-item" href="/docs/integrations/">Integrations</a>
        <a class="navbar-item" href="/docs/reference/">Reference</a>
      </div>
      <div class="navbar-end"><div class="navbar-item">
            <a class="button is-primary" href="/docs/download/">Get The Things Stack</a>
          </div>
      </div>
    </div>
  </div>
</nav>
<section class="search-container">
    <div class="container">
      <div class="columns is-vcentered">
        <div class="column">
          <div class="field has-addons has-addons-centered">
            <div class="control">
              <input class="input search-bar" id="search-input" type="text" placeholder="Search" type="text">
            </div>
          </div>
        </div>
      </div>
    </div>
</section>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: "",
indexName: "thethingsstack",
inputSelector: '#search-input',
debug: false 
});
</script>
<div class="container" role="document">
  <div class="columns my-0">
      <div class="column is-one-fifth-tablet is-one-third sidebar-left">
        

<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">Devices</h2>

<ul class="menu-list">
<a href="https://www.thethingsindustries.com/docs/devices/" class="">Overview</a>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/abp-vs-otaa/" class="">ABP vs OTAA</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/adding-devices/" class="is-active">Adding Devices</a>
    



    
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/atecc608a/" class="">ATECC608A/B Secure Elements</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/best-practices/" class="">Best Practices</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/class-b/" class="">Class B</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/class-c/" class="">Class C</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/device-claiming/" class="">Device Claiming</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/downlink-queue-ops/" class="">Downlink Queue Operations</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/end-device-templates/" class="">End Device Templates</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/generate-qr-code/" class="">Generating a QR Code</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/mac-settings/" class="">MAC Settings</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/multicast/" class="">Multicast</a>
  </li>
<li>
    <a href="https://www.thethingsindustries.com/docs/devices/troubleshooting/" class="">Troubleshooting Devices</a>
  </li>
</ul>



</nav>








      </div>
      <div class="column sidebar-middle">

<div class="docs-content">
<h1 class="title is-size-2">Adding Devices
  
  
  
  
</h1>

<div class="content">
  <p>This section contains instructions for adding devices in The Things Stack.</p>
<p>Devices are managed under applications. An application can contain an unlimited number of devices, but it can be helpful to sort devices in to applications by function or geographical area, to make the integrations and live data views more useful.</p>
<div class="tabs is-boxed">
  <ul>
    
    <li data-tab="console">
      <a>
        <span>Console</span>
      </a>
    </li>
    
    <li data-tab="cli">
      <a>
        <span>CLI</span>
      </a>
    </li>
    
  </ul>
</div>
<div class="tab-content content">
  <section data-content="console">
  <h2 id="adding-devices-using-the-console">Adding Devices using the Console</h2>
<p>To create a device, first open the application you wish to add the device in. Go to <strong>End devices</strong> in the left menu and click on <strong>+ Add end device</strong> to reach the end device registration page.</p>
<figure>
    <img src="application-overview.png"
         alt="Application overview"/> 
</figure>
<h3 id="using-the-lorawan-device-repository">Using the LoRaWAN Device Repository</h3>
<p>The <a href="https://github.com/TheThingsNetwork/lorawan-devices">LoRaWAN device repository</a> contains device profiles, LoRaWAN information, codecs, and more, for many LoRaWAN devices. Using the device repository to add devices in The Things Stack automatically uses the correct LoRaWAN version and regional parameters version, which means less information for you to find!</p>
<p>To use the device repository, make sure the <strong>From the LoRaWAN Device Repository</strong> tab is selected. Then, select the <strong>Brand</strong>, <strong>Model</strong>, <strong>Hardware Version</strong>, <strong>Software Version</strong>, and <strong>Region</strong> for your device.</p>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  If your device is not in the device repository, see <a href="#manually-create-end-device">Manually Create End Device</a> below.
</div>
<figure>
    <img src="device-repo.png"
         alt="Creating a new device with the Device Repository"/> 
</figure>
<p>Choose a <strong>Frequency plan</strong> appropriate for your region. Your device and gateway must use the same frequency plan to communicate.</p>
<p>Enter a <strong>JoinEUI/AppEUI</strong> if provided by your manufacturer. If your device is programmable, you may use all 0&rsquo;s, and then program the same JoinEUI/AppEUI in the device.</p>
<p>Enter your <strong>DevEUI</strong>.</p>
<p>If your manufacturer provides an <strong>AppKey</strong>, enter it. Otherwise, use the generate button to create one, and program it in to your device.</p>
<p>Finally, give your device a unique <strong>End device ID</strong>, and click the <strong>Register end device</strong> button to create the end device.</p>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  See <a href="https://www.thethingsindustries.com/docs/reference/id-eui-constraints/">ID and EUI constraints</a> for guidelines about choosing a unique ID.
</div>
<figure>
    <img src="device-repo-settings.png"
         alt="Device information"/> 
</figure>
<p>The device is now activated, and will appear as connected in The Things Stack once it sends an uplink.</p>
<h3 id="manually-create-end-device">Manually Create End Device</h3>
<p>If your device is not in the device repository, you may manually register it.</p>
<p>Make sure the <strong>Manually</strong> tab is selected.</p>
<p>Choose the <strong>Activation Mode</strong>.</p>
<p>Select the device <strong>LoRaWAN version</strong>.</p>
<p>If using Over-the-Air-Activation (OTAA) and an External Join Server, tick the <strong>External Join Server</strong> button.</p>
<p>The <strong>Network Server</strong>, <strong>Application Server</strong>, and <strong>Join Server</strong> addresses should correctly point to the address of The Things Stack deployment you are using.</p>
<p>Click the <strong>Start</strong> button to proceed to the Basic Settings page.</p>
<figure>
    <img src="manual-settings.png"
         alt="Register manually"/> 
</figure>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  This guide covers adding a device using <a href="https://www.thethingsindustries.com/docs/reference/glossary/#over-the-air-activation">OTAA</a> (the most secure and preferred activation method) and <a href="https://www.thethingsindustries.com/docs/reference/glossary/#lorawan-version">LoRaWAN version</a> MAC V1.0.2 (the most common LoRaWAN version, although newer versions are better and more secure). Names and keys may vary slightly for other versions.
</div>
<p>Give your device a unique <strong>End device ID</strong>.</p>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  See <a href="https://www.thethingsindustries.com/docs/reference/id-eui-constraints/">ID and EUI constraints</a> for guidelines about choosing a unique ID.
</div>
<p>Enter a <strong>JoinEUI/AppEUI</strong> if provided by your manufacturer. If your device is programmable, you may use all 0&rsquo;s, and then program the same JoinEUI/AppEUI in the device.</p>
<p>Enter your <strong>DevEUI</strong>.</p>
<p><strong>Name</strong> and <strong>Description</strong> are optional fields to help you identify your device.</p>
<p>Click <strong>Network Layer Settings</strong> to proceed to the next page.</p>
<figure>
    <img src="basic-settings.png"
         alt="Basic settings"/> 
</figure>
<p>Choose a <strong>Frequency plan</strong> appropriate for your region. Your device and gateway must use the same frequency plan to communicate.</p>
<p>Choose the <strong>Regional Parameters version</strong> provided by the manufacturer of your device. This should be specified in the data sheet as Regional Parameters or PHY version.</p>
<p>If your device supports <strong>Class B</strong> or <strong>Class C</strong> features, you may enable them using the checkboxes.</p>
<p>There are also advanced settings to configure <strong>Frame counter width</strong> and <strong>RX2 settings</strong>, but these should not be necessary for most devices.</p>
<p>Click the <strong>Join settings</strong> button to proceed to the next page.</p>
<figure>
    <img src="network-settings.png"
         alt="Network settings"/> 
</figure>
<p>If your manufacturer provides an <strong>AppKey</strong>, enter it. Otherwise, use the generate button to create one, and program it in to your device.</p>
<p>There are also advanced settings to configure <strong>Net ID</strong>, <strong>Application Server ID</strong>, and <strong>KEK Labels</strong>, but these are not necessary for most devices.</p>
<p>Finally, click <strong>Add end device</strong> to register the end device.</p>
<figure>
    <img src="join-settings.png"
         alt="Join settings"/> 
</figure>
<h2 id="set-device-location">Set Device Location</h2>
<p>Once you have added your end device to The Things Stack, you can also set its location to be displayed on a map widget by clicking <strong>Change location settings</strong>.</p>
<p>The end device location can be manually set by pinning on the map widget, or entering the <strong>Latitude</strong>, <strong>Longitude</strong> and <strong>Altitude</strong> values.</p>
<figure>
    <img src="device-location.png"
         alt="Gateway location"/> 
</figure>
</section>
<section data-content="cli">
  <h2 id="adding-devices-using-the-cli">Adding Devices using the CLI</h2>
<p>First, list the available frequency plans and LoRaWAN versions:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli end-devices list-frequency-plans
$ ttn-lw-cli end-devices create --help
</code></pre></div><h3 id="over-the-air-activation-otaa-device">Over-The-Air-Activation (OTAA) Device</h3>
<p>To create an end device using over-the-air-activation (OTAA):</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli end-devices create app1 dev1 <span class="se">\
</span><span class="se"></span>  --dev-eui 0004A30B001C0530 <span class="se">\
</span><span class="se"></span>  --app-eui 800000000000000C <span class="se">\
</span><span class="se"></span>  --frequency-plan-id EU_863_870 <span class="se">\
</span><span class="se"></span>  --root-keys.app-key.key 752BAEC23EAE7964AF27C325F4C23C9A <span class="se">\
</span><span class="se"></span>  --lorawan-version 1.0.3 <span class="se">\
</span><span class="se"></span>  --lorawan-phy-version 1.0.3-a
</code></pre></div><p>This will create a LoRaWAN 1.0.3 end device <code>dev1</code> in application <code>app1</code> with the <code>EU_863_870</code> frequency plan.</p>
<p>The end device should now be able to join the private network.</p>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  If you do not have a <code>JoinEUI</code> or <code>AppEUI</code>, it is okay to use <code>0000000000000000</code>. Be sure to use the same <code>JoinEUI</code> in your device as you enter in The Things Stack.
</div>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  The <code>AppEUI</code> is returned as <code>join_eui</code> (V3 uses LoRaWAN 1.1 terminology).
</div>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  You can also pass <code>--with-root-keys</code> to have root keys generated.
</div>
<h3 id="activation-by-personalization-abp-device">Activation By Personalization (ABP) Device</h3>
<p>It is also possible to register an ABP activated device using the <code>--abp</code> flag as follows:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ttn-lw-cli end-devices create app1 dev2 <span class="se">\
</span><span class="se"></span>  --frequency-plan-id EU_863_870 <span class="se">\
</span><span class="se"></span>  --lorawan-version 1.0.3 <span class="se">\
</span><span class="se"></span>  --lorawan-phy-version 1.0.3-a <span class="se">\
</span><span class="se"></span>  --abp <span class="se">\
</span><span class="se"></span>  --session.dev-addr 00E4304D <span class="se">\
</span><span class="se"></span>  --session.keys.app-s-key.key A0CAD5A30036DBE03096EB67CA975BAA <span class="se">\
</span><span class="se"></span>  --session.keys.nwk-s-key.key B7F3E161BC9D4388E6C788A0C547F255
</code></pre></div><div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  The <code>NwkSKey</code> is returned as <code>f_nwk_s_int_key</code> (The Things Stack uses LoRaWAN 1.1 terminology).
</div>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  You can also pass <code>--with-session</code> to have a session generated.
</div>
<h2 id="set-device-location">Set Device Location</h2>
<p>Once you have added your end device to The Things Stack, you can also set its location.</p>
<p>Set your end device&rsquo;s location with:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nv">APP_ID</span><span class="o">=</span><span class="s2">&#34;your-application-id&#34;</span> 
$ <span class="nv">DEVICE_ID</span><span class="o">=</span><span class="s2">&#34;your-device-id&#34;</span>
$ ttn-lw-cli end-devices <span class="nb">set</span> <span class="nv">$APP_ID</span> <span class="nv">$DEVICE_ID</span> <span class="se">\
</span><span class="se"></span>  --location.latitude 43.84 <span class="se">\
</span><span class="se"></span>  --location.longitude 18.32 <span class="se">\
</span><span class="se"></span>  --location.altitude <span class="m">500</span> <span class="se">\
</span></code></pre></div><p>You can also set the end device location to be updated from various sources with the <code>--location.source</code> flag. The source of the location data can be the registry, GPS data, results of the LoRa RSSI geolocation, etc.</p>
<div class="notification is-info is-light has-text-dark">
  <h5 class="title is-family-sans-serif has-text-dark mb-1">Note:</h5>
  <p>Use <code>ttn-lw-cli end-devices set app1 dev1 --help</code> command to see the full list of the available location sources and other relatable info.</p>
<p>If you set the alternative location source, the location settings you manually set will be overwritten by the automatic updates from that source.</p>
</div>
<p>The CLI will return something like:</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&#34;ids&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;device_id&#34;</span><span class="p">:</span> <span class="s2">&#34;dev1&#34;</span><span class="p">,</span>
    <span class="nt">&#34;application_ids&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;application_id&#34;</span><span class="p">:</span> <span class="s2">&#34;app1&#34;</span>
    <span class="p">},</span>
    <span class="nt">&#34;dev_eui&#34;</span><span class="p">:</span> <span class="s2">&#34;0004A30B001C0530&#34;</span><span class="p">,</span>
    <span class="nt">&#34;join_eui&#34;</span><span class="p">:</span> <span class="s2">&#34;800000000000000C&#34;</span>
  <span class="p">},</span>
  <span class="nt">&#34;created_at&#34;</span><span class="p">:</span> <span class="s2">&#34;2020-05-27T15:50:38.567Z&#34;</span><span class="p">,</span>
  <span class="nt">&#34;updated_at&#34;</span><span class="p">:</span> <span class="s2">&#34;2020-12-25T11:16:20.592Z&#34;</span><span class="p">,</span>
  <span class="nt">&#34;locations&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;user&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;latitude&#34;</span><span class="p">:</span> <span class="mf">43.84</span><span class="p">,</span>
      <span class="nt">&#34;longitude&#34;</span><span class="p">:</span> <span class="mf">18.32</span><span class="p">,</span>
      <span class="nt">&#34;altitude&#34;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
      <span class="nt">&#34;source&#34;</span><span class="p">:</span> <span class="s2">&#34;SOURCE_REGISTRY&#34;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<p></code></pre></div></p>
</section>

</div>

<p>Once a device has been added, get started with <a href="https://www.thethingsindustries.com/docs/integrations/">Integrations</a> to process and act on data.</p>
</div>

<div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/devices/abp-vs-otaa/">← ABP vs OTAA</a>
<a class="button is-pulled-right" href="/docs/devices/atecc608a/">ATECC608A/B Secure Elements →</a>
</div>

<script>window.emojicom_widget = { campaign: "" };</script>
<script src="https://cdn.emojicom.io/embed/widget.js" async></script>

<div class='feedback has-vertical-space'>
  <div id="emojicom-widget-inline"></div>
</div>
</div>


      </div>
      <div class="column is-hidden-touch is-one-quarter is-one-fifth-widescreen sidebar-right">
        <nav class="toc" aria-label="Page navigation">
    <h2 class="title is-size-6">On this page</h2>
    


  <ul class="menu-list">
    
      
      <li><a href='#adding-devices-using-the-console'>Adding Devices using the Console</a></li>
    
      
      <li><a href='#set-device-location'>Set Device Location</a></li>
    
      
      <li><a href='#adding-devices-using-the-cli'>Adding Devices using the CLI</a></li>
    
      
      <li><a href='#set-device-location'>Set Device Location</a></li>
    
  </ul>


  </nav>

      </div>
  </div>
</div>


<footer class="footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/devices/">Devices</a></p>
        <p><a class="" href="/docs/gateways/">Gateways</a></p>
        <p><a class="" href="/docs/integrations/">Integrations</a></p>
        <p><a class="" href="/docs/reference/">Reference</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/lorawan-stack-docs">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/network-and-routing/v3">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      <div class="column is-one-quarter">
        <h3 class="title is-6">About this page</h3>
        <div class="content">
<p class="is-size-7">
  Last changed by Ben Olayinka on 08 Jun 2021.
  <br>
  <a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/commit/6686377775155228b7954ae2489145642a2d878c">
      Update Adding Devices doc for device repo (#380)
    </a>
</p>

<a href="https://github.com/TheThingsIndustries/lorawan-stack-docs/blob/master/doc/content/devices/adding-devices/_index.md" class="button">Edit on Github</a>
</div>

      </div>
    </div>
  </div>
</footer>
<script src="https://www.thethingsindustries.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsindustries.com/docs/js/theme.min.af1cdce2271a42369c7c022fb683df665bf882e1fdc766a89a6ee99196bc4f9e.js" integrity="sha256-rxzc4icaQjacfAIvtoPfZlv4guH9x2aomm7pkZa8T54=" crossorigin="anonymous"></script><script>
  window.intercomSettings = {
    app_id: "",
  };
</script>

<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();
</script>

</body>

</html>
